<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-WT1126YN2Q"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-WT1126YN2Q');
  </script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>I Needed You ‚Äî Peck's Mission</title>
  <meta property="og:title" content="Peck's Mission | I Needed You" />
  <meta name="description" content="I took a leap of faith. I was the most vulnerable I've ever been online. And then my community showed up and showed out. Surgery is in five days. Here's what I'm thinking about." />
  <meta property="og:description" content="I took a leap of faith. I was the most vulnerable I've ever been online. And then my community showed up and showed out. Surgery is in five days. Here's what I'm thinking about." />
  <meta property="og:image" content="https://www.pecksmission.com/og-image.png" />
  <meta property="og:url" content="https://www.pecksmission.com/blog-post-three" />
  <meta property="og:type" content="website" />
  <meta name="twitter:card" content="summary_large_image" />
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <link rel="apple-touch-icon" href="apple-touch-icon.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Crimson+Pro:ital,wght@0,300;0,400;0,600;1,300;1,400&family=DM+Mono:wght@300;400&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    :root {
      --black: #0a0a0a;
      --white: #f5f0e8;
      --gold: #c9a84c;
      --gold-light: #e8c97a;
      --red: #8b2020;
      --gray: #4a4a4a;
      --gray-light: #9a9a9a;
    }
    html { scroll-behavior: smooth; }
    body {
      background: var(--black);
      color: var(--white);
      font-family: 'Crimson Pro', Georgia, serif;
      font-size: 22px;
      line-height: 1.8;
      overflow-x: hidden;
    }
    nav {
      position: fixed;
      top: 0;
      width: 100%;
      z-index: 100;
      padding: 1.2rem 3rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: rgba(10,10,10,0.92);
      backdrop-filter: blur(8px);
      border-bottom: 1px solid rgba(201,168,76,0.15);
    }
    .nav-logo {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 1.6rem;
      letter-spacing: 0.15em;
      color: var(--gold);
      text-decoration: none;
    }
    .nav-links { display: flex; gap: 2.5rem; list-style: none; }
    .nav-links a {
      color: var(--gray-light);
      text-decoration: none;
      font-family: 'DM Mono', monospace;
      font-size: 0.85rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      transition: color 0.2s;
    }
    .nav-links a:hover { color: var(--gold); }

    .post-header {
      padding: 10rem 3rem 5rem;
      max-width: 820px;
      margin: 0 auto;
      position: relative;
    }
    .post-header::before {
      content: '';
      position: fixed;
      inset: 0;
      background: radial-gradient(ellipse 70% 50% at 80% 20%, rgba(139,32,32,0.08) 0%, transparent 70%);
      pointer-events: none;
      z-index: -1;
    }
    .post-eyebrow {
      font-family: 'DM Mono', monospace;
      font-size: 0.85rem;
      letter-spacing: 0.25em;
      text-transform: uppercase;
      color: var(--gold);
      margin-bottom: 1.5rem;
    }
    .post-title {
      font-family: 'Bebas Neue', sans-serif;
      font-size: clamp(3rem, 7vw, 6rem);
      line-height: 0.95;
      letter-spacing: 0.02em;
      margin-bottom: 2rem;
    }
    .post-meta {
      font-family: 'DM Mono', monospace;
      font-size: 0.8rem;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: var(--gray-light);
      padding-bottom: 3rem;
      border-bottom: 1px solid rgba(201,168,76,0.15);
    }

    .post-body {
      max-width: 720px;
      margin: 0 auto;
      padding: 4rem 3rem 2rem;
    }
    .post-body p {
      font-size: 1.15rem;
      font-weight: 300;
      color: #d4cfc7;
      margin-bottom: 1.8rem;
      line-height: 1.85;
    }
    .post-body p.opening {
      font-size: 1.35rem;
      font-style: italic;
      color: var(--white);
      font-weight: 300;
    }
    .post-body h2 {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 2rem;
      letter-spacing: 0.05em;
      color: var(--white);
      margin: 3.5rem 0 1.2rem;
    }
    .quote-block {
      background: rgba(201,168,76,0.05);
      border-left: 3px solid var(--gold);
      padding: 2rem 2.5rem;
      margin: 2.5rem 0;
    }
    .quote-text {
      font-family: 'Crimson Pro', serif;
      font-size: 1.25rem;
      font-style: italic;
      font-weight: 300;
      color: var(--white);
      line-height: 1.6;
      margin-bottom: 0.8rem;
    }
    .quote-attr {
      font-family: 'DM Mono', monospace;
      font-size: 0.8rem;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: var(--gold);
    }
    .verse-block {
      background: rgba(139,32,32,0.08);
      border-left: 3px solid var(--red);
      padding: 2rem 2.5rem;
      margin: 2.5rem 0;
    }
    .verse-text {
      font-family: 'Crimson Pro', serif;
      font-size: 1.2rem;
      font-style: italic;
      font-weight: 300;
      color: var(--white);
      line-height: 1.6;
      margin-bottom: 0.6rem;
    }
    .verse-ref {
      font-family: 'DM Mono', monospace;
      font-size: 0.8rem;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: var(--gray-light);
    }
    .pull-quote {
      font-family: 'Crimson Pro', serif;
      font-size: clamp(1.4rem, 2.5vw, 1.9rem);
      font-style: italic;
      font-weight: 300;
      color: var(--gold-light);
      line-height: 1.4;
      text-align: center;
      padding: 2.5rem 1rem;
      margin: 2rem 0;
      display: block;
    }
    .divider {
      width: 4rem;
      height: 1px;
      background: rgba(201,168,76,0.3);
      margin: 3rem auto;
    }
    .closing-line {
      font-family: 'Bebas Neue', sans-serif;
      font-size: clamp(1.5rem, 3vw, 2.5rem);
      letter-spacing: 0.03em;
      color: var(--gold);
      line-height: 1.2;
      text-align: center;
      padding: 3rem 0 0;
      border-top: 1px solid rgba(201,168,76,0.15);
      margin: 3rem 0 0;
    }
    .author-block {
      display: flex;
      align-items: center;
      gap: 1.5rem;
      padding: 2.5rem 0;
      border-top: 1px solid rgba(255,255,255,0.05);
      margin-top: 3rem;
    }
    .author-info h4 {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 1.2rem;
      letter-spacing: 0.08em;
      color: var(--white);
      margin-bottom: 0.3rem;
    }
    .author-info p {
      font-size: 0.9rem !important;
      color: var(--gray-light) !important;
      margin: 0 !important;
    }
    footer {
      padding: 3rem;
      text-align: center;
      border-top: 1px solid rgba(255,255,255,0.05);
    }
    .footer-logo {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 2rem;
      letter-spacing: 0.15em;
      color: var(--gold);
      margin-bottom: 1rem;
    }
    .footer-kipling {
      font-family: 'Crimson Pro', serif;
      font-size: 1.15rem;
      font-style: italic;
      color: var(--gray-light);
      margin-bottom: 0.5rem;
    }
    .footer-line {
      font-family: 'DM Mono', monospace;
      font-size: 0.8rem;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: var(--gray);
    }
    .nav-footer { display: flex; justify-content: center; gap: 2rem; list-style: none; margin-top: 1.5rem; }
    .nav-footer a { color: var(--gray); text-decoration: none; font-family: 'DM Mono', monospace; font-size: 0.8rem; letter-spacing: 0.12em; text-transform: uppercase; transition: color 0.2s; }
    .nav-footer a:hover { color: var(--gold); }
    @media (max-width: 768px) {
      nav { padding: 1rem 1.5rem; }
      .nav-links { display: none; }
      .post-header { padding: 7rem 1.5rem 3rem; }
      .post-body { padding: 3rem 1.5rem 4rem; }
      .quote-block, .verse-block { padding: 1.5rem; }
    }

    /* POST NAVIGATION */
    .post-nav { max-width: 720px; margin: 0 auto; padding: 0 3rem; }
    .post-nav-inner { display: grid; grid-template-columns: 1fr 1fr; gap: 1px; background: rgba(255,255,255,0.06); margin: 2rem 0 0; }
    .post-nav-card { background: var(--black); padding: 2rem 2.5rem; text-decoration: none; color: inherit; transition: background 0.2s; display: block; }
    .post-nav-card:hover { background: rgba(255,255,255,0.02); }
    .post-nav-card.next { text-align: right; }
    .post-nav-card.empty { background: rgba(255,255,255,0.01); pointer-events: none; }
    .post-nav-direction { font-family: 'DM Mono', monospace; font-size: 0.7rem; letter-spacing: 0.25em; text-transform: uppercase; color: var(--gray-light); margin-bottom: 0.5rem; display: block; }
    .post-nav-title { font-family: 'Bebas Neue', sans-serif; font-size: 1.4rem; line-height: 1.1; color: var(--white); display: block; transition: color 0.2s; }
    .post-nav-card:hover .post-nav-title { color: var(--gold); }
    .post-nav-date { font-family: 'DM Mono', monospace; font-size: 0.7rem; letter-spacing: 0.15em; text-transform: uppercase; color: var(--gray); margin-top: 0.4rem; display: block; }
    @media (max-width: 640px) { .post-nav { padding-left: 1.5rem; padding-right: 1.5rem; } .post-nav-inner { grid-template-columns: 1fr; } .post-nav-card.next { text-align: left; } }

    /* FOLLOW ALONG POPUP */
    .popup-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.75);
      backdrop-filter: blur(4px);
      z-index: 999;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1.5rem;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.4s ease;
    }
    .popup-overlay.visible {
      opacity: 1;
      pointer-events: all;
    }
    .popup-box {
      background: #111;
      border: 1px solid rgba(201,168,76,0.25);
      max-width: 500px;
      width: 100%;
      padding: 3rem 2.5rem 2.5rem;
      position: relative;
      transform: translateY(20px);
      transition: transform 0.4s ease;
    }
    .popup-overlay.visible .popup-box {
      transform: translateY(0);
    }
    .popup-close {
      position: absolute;
      top: 1rem;
      right: 1.2rem;
      background: none;
      border: none;
      color: var(--gray-light);
      font-size: 1.4rem;
      cursor: pointer;
      line-height: 1;
      padding: 0.2rem 0.4rem;
      transition: color 0.2s;
    }
    .popup-close:hover { color: var(--gold); }
    .popup-eyebrow {
      font-family: 'DM Mono', monospace;
      font-size: 0.75rem;
      letter-spacing: 0.25em;
      text-transform: uppercase;
      color: var(--gold);
      margin-bottom: 0.8rem;
    }
    .popup-title {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 2.4rem;
      line-height: 1;
      letter-spacing: 0.03em;
      color: var(--white);
      margin-bottom: 0.8rem;
    }
    .popup-sub {
      font-family: 'Crimson Pro', serif;
      font-size: 1.05rem;
      font-style: italic;
      font-weight: 300;
      color: var(--gray-light);
      line-height: 1.6;
      margin-bottom: 1.8rem;
    }
    .popup-form-group { margin-bottom: 0.8rem; }
    .popup-input {
      width: 100%;
      background: rgba(255,255,255,0.04);
      border: 1px solid rgba(255,255,255,0.1);
      color: var(--white);
      padding: 0.85rem 1rem;
      font-family: 'Crimson Pro', serif;
      font-size: 1rem;
      outline: none;
      transition: border-color 0.2s;
      -webkit-appearance: none;
    }
    .popup-input:focus { border-color: rgba(201,168,76,0.5); }
    .popup-input::placeholder { color: var(--gray); font-style: italic; }
    .popup-btn {
      background: var(--gold);
      color: var(--black);
      padding: 0.95rem 0;
      width: 100%;
      font-family: 'DM Mono', monospace;
      font-size: 0.85rem;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      border: none;
      cursor: pointer;
      margin-top: 0.4rem;
      transition: background 0.2s;
    }
    .popup-btn:hover { background: var(--gold-light); }
    .popup-btn:disabled { opacity: 0.6; cursor: not-allowed; }
    .popup-success {
      display: none;
      text-align: center;
      padding: 1rem 0;
    }
    .popup-success-msg {
      font-family: 'Crimson Pro', serif;
      font-size: 1.3rem;
      font-style: italic;
      color: var(--gold-light);
      margin-bottom: 0.4rem;
    }
    .popup-success-sub {
      font-family: 'DM Mono', monospace;
      font-size: 0.75rem;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: var(--gray-light);
    }
    .popup-skip {
      display: block;
      text-align: center;
      margin-top: 1.2rem;
      font-family: 'DM Mono', monospace;
      font-size: 0.75rem;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: var(--gray);
      cursor: pointer;
      background: none;
      border: none;
      transition: color 0.2s;
    }
    .popup-skip:hover { color: var(--gray-light); }
  
    .hamburger { display: none; flex-direction: column; justify-content: center; gap: 5px; cursor: pointer; padding: 4px; background: none; border: none; z-index: 200; }
    .hamburger span { display: block; width: 24px; height: 2px; background: var(--gold); transition: all 0.3s; }
    .hamburger.open span:nth-child(1) { transform: translateY(7px) rotate(45deg); }
    .hamburger.open span:nth-child(2) { opacity: 0; }
    .hamburger.open span:nth-child(3) { transform: translateY(-7px) rotate(-45deg); }
    .mobile-menu { display: none; position: fixed; top: 60px; right: 1.5rem; width: 220px; background: rgba(10,10,10,0.97); border: 1px solid rgba(201,168,76,0.2); border-radius: 4px; z-index: 150; flex-direction: column; padding: 1.2rem 1.5rem; gap: 1.2rem; backdrop-filter: blur(8px); }
    .mobile-menu.open { display: flex; }
    .mobile-menu a { color: var(--white); text-decoration: none; font-family: 'DM Mono', monospace; font-size: 0.85rem; letter-spacing: 0.12em; text-transform: uppercase; transition: color 0.2s; }
    .mobile-menu a:hover { color: var(--gold); }
    @media (max-width: 768px) { .hamburger { display: flex; } .nav-links { display: none !important; } }

  </style>
</head>
<body>

<nav>
  <a href="index.html" class="nav-logo">Peck's Mission</a>
  <ul class="nav-links">
    <li><a href="about.html">My Story</a></li>
    <li><a href="chiari.html">What is Chiari</a></li>
    <li><a href="blog.html">From The Field</a></li>
    <li><a href="follow-along.html">Follow Along</a></li>
  </ul>

  <button class="hamburger" id="hamburger" aria-label="Menu">
    <span></span><span></span><span></span>
  </button>
</nav>
<div class="mobile-menu" id="mobileMenu">
  <a href="index.html" onclick="closeMobile()">Home</a>
  <a href="about.html" onclick="closeMobile()">My Story</a>
  <a href="chiari.html" onclick="closeMobile()">What is Chiari</a>
  <a href="blog.html" onclick="closeMobile()">From The Field</a>
  <a href="follow-along.html" onclick="closeMobile()">Follow Along</a>
</div>

<div class="post-header">
  <p class="post-eyebrow">From The Field &nbsp;¬∑&nbsp; February 20, 2026</p>
  <h1 class="post-title">I Needed You</h1>
  <div style="display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 1rem;">
    <div>
      <p class="post-meta">By Peck &nbsp;¬∑&nbsp; Combat Medic &nbsp;¬∑&nbsp; CVICU &nbsp;¬∑&nbsp; Chiari Patient</p>
      <p style="font-family: 'DM Mono', monospace; font-size: 0.65rem; letter-spacing: 0.2em; text-transform: uppercase; color: var(--gold); margin-top: 0.5rem;">11 min read</p>
    </div>
    <a href="follow-along.html#reach-out" style="background: var(--gold); color: var(--black); padding: 1rem 2.5rem; font-family: 'DM Mono', monospace; font-size: 0.8rem; letter-spacing: 0.2em; text-transform: uppercase; text-decoration: none; display: inline-block; transition: background 0.2s;"
      onmouseover="this.style.background='#e8c97a'" onmouseout="this.style.background='#c9a84c'">
      Follow Along
    </a>
  </div>
</div>

<article class="post-body">

  <p class="opening">I took a leap of faith. I was the most vulnerable I've ever been online. I showed every ounce of myself ‚Äî and the whole time, I couldn't stop thinking about who was watching.</p>

  <p>People from church. My parents' friends. Friends from the military. Friends I've known since I was a kid. Would they think I'm weak? Would they think I'm slow? It's hard to lay all your cards on the table. It's hard to admit you don't have it together. These are not easy things to do.</p>

  <p>But today ‚Äî my community showed up and showed out.</p>

  <p>Childhood friends. Military brothers and sisters. My sister's friends. My parents' friends ‚Äî people they've known since they were kids. They all came. And they all said the same thing: We're praying. We got you.</p>

  <div class="divider"></div>

  <h2>Being the Patient</h2>

  <p>I'll be real with you. Getting help is not something I want to do. I don't want to be seen as weak. I'll run into a burning building. I'll save a cat from a tree. But being the patient? That's not a role I want. I want to be the one treating. I want to be the one serving.</p>

  <p>But here I am.</p>

  <div class="verse-block">
    <p class="verse-text">"My grace is sufficient for you, for my power is made perfect in weakness."</p>
    <p class="verse-ref">‚Äî 2 Corinthians 12:9</p>
  </div>

  <p>I used to say that verse. I've quoted it to patients. I've written it in cards. But I never thought I'd be the one who needed it said back to me. And here's what I'm realizing ‚Äî maybe you can't give what you haven't received. Maybe that's been the point all along.</p>

  <p>This ‚Äî right here, these words ‚Äî this is my outlet. This is how I love people right now.</p>

  <div class="divider"></div>

  <h2>Nobody Caught It</h2>

  <p>I was diagnosed with ADHD at a young age. My whole life, I had problems I couldn't put a finger on. My parents did everything right. Doctor's visit after doctor's visit. We went through every step trying to figure out what was wrong.</p>

  <p>But nobody caught it.</p>

  <p>That makes me ask ‚Äî should an MRI be standard? How many people are out there misdiagnosed with ADHD, or vertigo, or something else entirely, when what they actually need is someone to walk in with the scan results and say: we found something?</p>

  <p>I was diagnosed with vertigo. That's not what I have. I have a Chiari malformation. And I'm having brain surgery in five days.</p>

  <span class="pull-quote">People deserve the second doctor. People deserve the truth.</span>

  <p>I needed someone to stand at my bedside and tell me I wasn't making it up. I needed someone to treat me like a person ‚Äî not like an appliance attached to a hospital bed in a hallway. I spent 40 hours on that bed in a hallway. And I want to be clear ‚Äî it's not the nurses' fault. Our medical system is severely depleted. The resources our staff have right now are nowhere near what they need.</p>

  <p>I had a neurosurgeon tell me it wasn't that bad. I had another one walk in and give me the gravity of my situation straight. I needed that second doctor. So does someone else right now.</p>

  <div class="divider"></div>

  <h2>The Prayer Is Being Answered</h2>

  <p>Last spring, while I was still working in the medical field, I made a simple prayer ‚Äî that God would give me the ability to be more empathetic toward my patients. I think He's answering that prayer right now.</p>

  <p>Paul said he would boast in his weaknesses so that the power of Christ could rest on him. I don't want to waste this weakness either. These next two months that I'm down, that I can't do much ‚Äî maybe this is the time. Maybe I can encourage others. Show people they're not alone. Talk to veterans. Meet people who need someone to be vulnerable and say: hey, it's okay that you don't have it all together.</p>

  <p>Maybe this is the gift.</p>

  <p>We can sit here and talk about the 22 veterans who take their lives every day. We can talk about depression. We can talk about patients who feel something is wrong and get dismissed anyway. Or we can do something about it.</p>

  <p>There is no part of me that wants to waste this.</p>

  <div class="divider"></div>

  <h2>What I'm Actually Asking For</h2>

  <p>People keep asking what they can do. What do I need? The medic in me keeps redirecting ‚Äî what can I do for others?</p>

  <p>I don't want meals. I don't want anything during surgery. What I want is simple: share this. Send it to one person who needs it. The one whose hands are tingling. The one who's been told it's not that bad by someone who doesn't have to live in their body. The one who feels like something is wrong and can't get anyone to listen.</p>

  <p>That person exists. You know them. Send it.</p>

  <p>And if you want to follow along ‚Äî get on the email list or check back here. Surgery is February 26th. I'll be on the other side of it soon. And I'll have a lot to say.</p>

  <div class="closing-line">
    I needed you ‚Äî and you showed up.<br>
    Now let's show up for someone else.<br>
    Let's get to work.
  </div>

</article>

<div class="post-nav">
  <div class="post-nav-inner">
    <a href="blog-post-two.html" class="post-nav-card prev">
      <span class="post-nav-direction">‚Üê Previous</span>
      <span class="post-nav-title">What I Found Out This Week</span>
      <span class="post-nav-date">February 19, 2026</span>
    </a>
    <a href="blog-post-four.html" class="post-nav-card next">
      <span class="post-nav-direction">Next ‚Üí</span>
      <span class="post-nav-title">Wrestling With Your Living Will</span>
      <span class="post-nav-date">February 21, 2026</span>
    </a>
  </div>
</div>

<!-- COMMENTS -->
<style>
  /* ‚îÄ‚îÄ Section wrapper ‚îÄ‚îÄ */
  .comments-wrap{max-width:720px;margin:0 auto;padding:0 3rem 5rem;}
  /* ‚îÄ‚îÄ Top divider ‚Äî wider, more breathing room ‚îÄ‚îÄ */
  .comments-rule{width:100%;height:1px;background:rgba(201,168,76,0.12);margin:0 0 3.5rem;}
  /* ‚îÄ‚îÄ Eyebrow label ‚îÄ‚îÄ */
  .comments-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:2rem;}
  .comments-eyebrow{font-family:'DM Mono',monospace;font-size:0.72rem;letter-spacing:0.28em;text-transform:uppercase;color:var(--gold);opacity:0.7;margin:0;}
  /* ‚îÄ‚îÄ Post salute ‚Äî inline with Leave a thought ‚îÄ‚îÄ */
  .post-salute-wrap{display:flex;align-items:center;margin:0;}
  .post-salute-btn{background:none;border:1px solid rgba(255,255,255,0.1);border-radius:3px;cursor:pointer;display:flex;align-items:center;gap:0.65rem;padding:0.7rem 1.6rem;opacity:0.28;transition:opacity 0.25s,border-color 0.25s;}
  .post-salute-btn:hover{opacity:0.6;border-color:rgba(255,255,255,0.25);}
  .post-salute-btn.saluted{opacity:1;border-color:rgba(255,255,255,0.45);}
  .post-salute-btn .salute-emoji{font-size:1.25rem;filter:grayscale(1) brightness(10);display:inline-block;transition:transform 0.15s;}
  .post-salute-btn.saluted .salute-emoji{transform:scale(1.08);}
  .post-salute-label{font-family:'DM Mono',monospace;font-size:0.7rem;letter-spacing:0.22em;text-transform:uppercase;color:rgba(255,255,255,0.85);}
  .post-salute-count{font-family:'DM Mono',monospace;font-size:0.7rem;color:rgba(255,255,255,0.5);}
  /* ‚îÄ‚îÄ Write form ‚îÄ‚îÄ */
  .comment-form{display:flex;flex-direction:column;gap:0.8rem;margin-bottom:3.5rem;padding-bottom:3rem;border-bottom:1px solid rgba(255,255,255,0.05);}
  .comment-textarea{background:rgba(255,255,255,0.03);border:1px solid rgba(201,168,76,0.15);border-radius:2px;color:var(--white);font-family:'Crimson Pro',serif;font-size:1rem;line-height:1.65;padding:0.9rem 1rem;resize:vertical;min-height:88px;transition:border-color 0.2s;outline:none;}
  .comment-textarea:focus{border-color:rgba(201,168,76,0.45);}
  .comment-textarea::placeholder{color:rgba(255,255,255,0.2);}
  .comment-name-row{display:flex;align-items:center;gap:0.75rem;}
  .comment-name-toggle{background:none;border:none;cursor:pointer;font-family:'DM Mono',monospace;font-size:0.68rem;letter-spacing:0.18em;text-transform:uppercase;color:rgba(255,255,255,0.3);padding:0;transition:color 0.2s;display:flex;align-items:center;gap:0.4rem;}
  .comment-name-toggle:hover{color:var(--gold);}
  .comment-name-toggle .caret{display:inline-block;transition:transform 0.2s;font-style:normal;}
  .comment-name-toggle.open .caret{transform:rotate(90deg);}
  .comment-name-input{background:rgba(255,255,255,0.04);border:1px solid rgba(201,168,76,0.18);border-radius:2px;color:var(--white);font-family:'Crimson Pro',serif;font-size:0.95rem;padding:0.5rem 0.85rem;outline:none;transition:border-color 0.2s,max-width 0.25s,opacity 0.2s;max-width:0;opacity:0;overflow:hidden;pointer-events:none;flex:1;}
  .comment-name-input.visible{max-width:260px;opacity:1;pointer-events:auto;}
  .comment-name-input:focus{border-color:rgba(201,168,76,0.5);}
  .comment-name-input::placeholder{color:rgba(255,255,255,0.2);}
  .comment-submit{align-self:flex-start;background:transparent;border:1px solid rgba(201,168,76,0.4);color:var(--gold);font-family:'DM Mono',monospace;font-size:0.7rem;letter-spacing:0.22em;text-transform:uppercase;padding:0.55rem 1.4rem;cursor:pointer;border-radius:2px;transition:background 0.2s,color 0.2s;}
  .comment-submit:hover{background:var(--gold);color:var(--black);}
  /* ‚îÄ‚îÄ Comment list ‚îÄ‚îÄ */
  .comment-list{display:flex;flex-direction:column;gap:2rem;}
  .comment-item{padding-left:1rem;border-left:1px solid rgba(201,168,76,0.12);}
  .comment-item-header{display:flex;align-items:baseline;gap:0.65rem;margin-bottom:0.25rem;}
  .comment-item-name{font-family:'DM Mono',monospace;font-size:0.72rem;letter-spacing:0.12em;text-transform:uppercase;color:var(--gold);}
  .comment-item-date{font-family:'DM Mono',monospace;font-size:0.65rem;color:rgba(255,255,255,0.25);}
  .comment-item-text{font-family:'Crimson Pro',serif;font-size:0.98rem;font-weight:300;color:#b8b2a6;line-height:1.7;margin:0 0 0.65rem;}
  .comment-empty{font-family:'Crimson Pro',serif;font-size:0.95rem;font-style:italic;color:rgba(255,255,255,0.25);}
  /* ‚îÄ‚îÄ Action bar ‚îÄ‚îÄ */
  .comment-actions{display:flex;align-items:center;gap:1.25rem;}
  /* Comment salute */
  .salute-btn{background:none;border:none;cursor:pointer;display:flex;align-items:center;gap:0.3rem;padding:0;line-height:1;opacity:0.22;transition:opacity 0.2s;}
  .salute-btn:hover{opacity:0.55;}
  .salute-btn.saluted{opacity:1;}
  .salute-btn .salute-emoji{font-size:0.95rem;filter:grayscale(1) brightness(10);display:inline-block;transition:transform 0.15s;}
  .salute-btn.saluted .salute-emoji{transform:scale(1.12);}
  .salute-count{font-family:'DM Mono',monospace;font-size:0.65rem;color:rgba(255,255,255,0.7);}
  /* Reply + expand */
  .comment-reply-btn,.expand-replies-btn{background:none;border:none;cursor:pointer;font-family:'DM Mono',monospace;font-size:0.65rem;letter-spacing:0.14em;text-transform:uppercase;color:rgba(255,255,255,0.25);padding:0;transition:color 0.2s;display:flex;align-items:center;gap:0.25rem;}
  .comment-reply-btn:hover,.expand-replies-btn:hover{color:rgba(255,255,255,0.6);}
  .expand-replies-btn .expand-caret{font-size:0.55rem;transition:transform 0.2s;}
  .expand-replies-btn.open .expand-caret{transform:rotate(90deg);}
  /* ‚îÄ‚îÄ Inline reply form ‚îÄ‚îÄ */
  .reply-form{display:none;flex-direction:column;gap:0.5rem;margin-top:0.8rem;}
  .reply-form.open{display:flex;}
  .reply-form .comment-textarea{min-height:56px;font-size:0.93rem;}
  .reply-name-row{display:flex;align-items:center;gap:0.6rem;flex-wrap:wrap;}
  .reply-name-input{background:rgba(255,255,255,0.04);border:1px solid rgba(201,168,76,0.15);border-radius:2px;color:var(--white);font-family:'Crimson Pro',serif;font-size:0.9rem;padding:0.4rem 0.75rem;outline:none;flex:1;min-width:120px;transition:border-color 0.2s;}
  .reply-name-input:focus{border-color:rgba(201,168,76,0.45);}
  .reply-name-input::placeholder{color:rgba(255,255,255,0.2);}
  .reply-submit{background:transparent;border:1px solid rgba(201,168,76,0.3);color:var(--gold);font-family:'DM Mono',monospace;font-size:0.65rem;letter-spacing:0.18em;text-transform:uppercase;padding:0.38rem 0.9rem;cursor:pointer;border-radius:2px;transition:background 0.2s,color 0.2s;}
  .reply-submit:hover{background:var(--gold);color:var(--black);}
  .reply-cancel{background:none;border:none;cursor:pointer;font-family:'DM Mono',monospace;font-size:0.65rem;letter-spacing:0.14em;text-transform:uppercase;color:rgba(255,255,255,0.22);padding:0;transition:color 0.2s;}
  .reply-cancel:hover{color:rgba(255,255,255,0.55);}
  /* ‚îÄ‚îÄ Nested children ‚îÄ‚îÄ */
  .comment-children{margin-top:1.1rem;display:none;flex-direction:column;gap:1.2rem;padding-left:1rem;border-left:1px solid rgba(255,255,255,0.05);}
  .comment-children.open{display:flex;}
  @media(max-width:640px){
    .comments-wrap{padding:0 1.4rem 4rem;}
    .comment-name-input.visible{max-width:180px;}
    .comment-children{padding-left:0.65rem;}
  }
</style>

<section class="comments-wrap" id="comments" data-post="blog-post-three">
  <div class="comments-rule"></div>
  <div class="comments-header">
    <p class="comments-eyebrow">Leave a thought</p>
    <div class="post-salute-wrap">
      <button class="post-salute-btn" id="post-salute-btn" type="button">
        <span class="salute-emoji">ü´°</span>
        <span class="post-salute-label">Salute</span>
        <span class="post-salute-count" id="post-salute-count">0</span>
      </button>
    </div>
  </div>
  <div class="comment-form">
    <textarea class="comment-textarea" id="cm-text" placeholder="Say something‚Ä¶" rows="3"></textarea>
    <div class="comment-name-row">
      <button class="comment-name-toggle" id="cm-name-toggle" type="button">
        <span class="caret">‚ñ∂</span> Add your name
      </button>
      <input class="comment-name-input" id="cm-name" type="text" placeholder="Your name (optional)" autocomplete="off" />
    </div>
    <button class="comment-submit" id="cm-submit" type="button">Post</button>
  </div>
  <div class="comment-list" id="cm-list"></div>
</section>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import { getFirestore, collection, doc, addDoc, getDoc, setDoc, updateDoc, increment, query, orderBy, getDocs, serverTimestamp }
    from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyApK7IJBYNtw0WD74sHFaNKlMPLAqT1xbg",
    authDomain: "joes-mission.firebaseapp.com",
    projectId: "joes-mission",
    storageBucket: "joes-mission.firebasestorage.app",
    messagingSenderId: "81899759818",
    appId: "1:81899759818:web:5a8aaec3afd8c454b46c33"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  const section = document.getElementById('comments');
  const postKey = section.getAttribute('data-post');
  const colRef = collection(db, 'comments', postKey, 'entries');
  const saluteStorage = 'saluted:' + postKey;

  // ‚îÄ‚îÄ Top-level name toggle ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  const toggle = document.getElementById('cm-name-toggle');
  const nameInput = document.getElementById('cm-name');
  toggle.addEventListener('click', function() {
    toggle.classList.toggle('open');
    nameInput.classList.toggle('visible');
    if (nameInput.classList.contains('visible')) nameInput.focus();
  });

  function fmt(ts) {
    const d = ts && ts.toDate ? ts.toDate() : new Date(ts);
    return d.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
  }

  // ‚îÄ‚îÄ Post-level salute ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  async function initPostSalute() {
    const btn = document.getElementById('post-salute-btn');
    const countEl = document.getElementById('post-salute-count');
    if (!btn) return;
    const postSaluteRef = doc(db, 'salutes', postKey);
    // Load count
    try {
      const snap = await getDoc(postSaluteRef);
      const count = snap.exists() ? (snap.data().count || 0) : 0;
      countEl.textContent = count;
    } catch(e) { console.error(e); }
    // Restore local saluted state
    if (sessionStorage.getItem(saluteStorage)) btn.classList.add('saluted');
    btn.addEventListener('click', async function() {
      if (btn.classList.contains('saluted')) return; // one salute per session
      btn.classList.add('saluted');
      sessionStorage.setItem(saluteStorage, '1');
      try {
        const snap = await getDoc(postSaluteRef);
        if (snap.exists()) {
          await updateDoc(postSaluteRef, { count: increment(1) });
        } else {
          await setDoc(postSaluteRef, { count: 1 });
        }
        const newSnap = await getDoc(postSaluteRef);
        countEl.textContent = newSnap.data().count;
      } catch(e) { console.error(e); }
    });
  }

  // ‚îÄ‚îÄ Build tree from flat list ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  function buildTree(docs) {
    const map = {};
    const roots = [];
    docs.forEach(d => { map[d.id] = { data: d.data(), id: d.id, children: [] }; });
    docs.forEach(d => {
      const node = map[d.id];
      const pid = node.data.parentId || null;
      if (pid && map[pid]) { map[pid].children.push(node); }
      else { roots.push(node); }
    });
    return roots;
  }

  // ‚îÄ‚îÄ Build a comment element ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  function buildEl(node, depth) {
    const { data: c, id: docId, children } = node;
    const item = document.createElement('div');
    item.className = 'comment-item';

    // Header
    const header = document.createElement('div');
    header.className = 'comment-item-header';
    const nameEl = document.createElement('span');
    nameEl.className = 'comment-item-name';
    nameEl.textContent = c.name || 'Anonymous';
    const dateEl = document.createElement('span');
    dateEl.className = 'comment-item-date';
    dateEl.textContent = fmt(c.ts);
    header.appendChild(nameEl);
    header.appendChild(dateEl);

    // Text
    const textEl = document.createElement('p');
    textEl.className = 'comment-item-text';
    textEl.textContent = c.text;

    item.appendChild(header);
    item.appendChild(textEl);

    // ‚îÄ‚îÄ Action bar ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    const actions = document.createElement('div');
    actions.className = 'comment-actions';

    // Salute button (per comment)
    const saluteBtn = document.createElement('button');
    saluteBtn.className = 'salute-btn';
    const saluteEmoji = document.createElement('span');
    saluteEmoji.className = 'salute-emoji';
    saluteEmoji.textContent = '\uD83E\uDDE1'; // ü´°
    const saluteCount = document.createElement('span');
    saluteCount.className = 'salute-count';
    saluteCount.textContent = c.salutes || 0;
    saluteBtn.appendChild(saluteEmoji);
    saluteBtn.appendChild(saluteCount);
    const commentSaluteKey = 'saluted:' + postKey + ':' + docId;
    if (sessionStorage.getItem(commentSaluteKey)) saluteBtn.classList.add('saluted');
    saluteBtn.addEventListener('click', async function() {
      if (saluteBtn.classList.contains('saluted')) return;
      saluteBtn.classList.add('saluted');
      sessionStorage.setItem(commentSaluteKey, '1');
      const current = parseInt(saluteCount.textContent) || 0;
      saluteCount.textContent = current + 1;
      try {
        const ref = doc(db, 'comments', postKey, 'entries', docId);
        await updateDoc(ref, { salutes: increment(1) });
      } catch(e) { console.error(e); saluteCount.textContent = current; }
    });
    actions.appendChild(saluteBtn);

    // Reply button
    const replyBtn = document.createElement('button');
    replyBtn.className = 'comment-reply-btn';
    replyBtn.textContent = '\u21a9 Reply';
    actions.appendChild(replyBtn);

    // Expand replies button (only if children exist)
    let expandBtn = null;
    if (children.length > 0) {
      expandBtn = document.createElement('button');
      expandBtn.className = 'expand-replies-btn';
      const caret = document.createElement('span');
      caret.className = 'expand-caret';
      caret.textContent = '\u25b6';
      const label = document.createElement('span');
      label.textContent = children.length + (children.length === 1 ? ' reply' : ' replies');
      expandBtn.appendChild(caret);
      expandBtn.appendChild(label);
      actions.appendChild(expandBtn);
    }

    item.appendChild(actions);

    // Reply form
    const replyForm = document.createElement('div');
    replyForm.className = 'reply-form';
    replyForm.innerHTML =
      '<textarea class="comment-textarea" placeholder="Write a reply\u2026" rows="2"></textarea>' +
      '<div class="reply-name-row">' +
        '<input class="reply-name-input" type="text" placeholder="Your name (optional)" autocomplete="off" />' +
        '<button class="reply-submit" type="button">Post reply</button>' +
        '<button class="reply-cancel" type="button">Cancel</button>' +
      '</div>';
    item.appendChild(replyForm);

    // Children (hidden by default)
    const childrenWrap = document.createElement('div');
    childrenWrap.className = 'comment-children';
    children.forEach(child => childrenWrap.appendChild(buildEl(child, depth + 1)));
    item.appendChild(childrenWrap);

    // ‚îÄ‚îÄ Event listeners ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
    if (expandBtn) {
      expandBtn.addEventListener('click', () => {
        const isOpen = childrenWrap.classList.toggle('open');
        expandBtn.classList.toggle('open', isOpen);
        const label = expandBtn.querySelector('span:last-child');
        label.textContent = (isOpen ? '\u25be ' : '') + children.length + (children.length === 1 ? ' reply' : ' replies');
      });
    }

    replyBtn.addEventListener('click', () => {
      replyForm.classList.toggle('open');
      if (replyForm.classList.contains('open')) replyForm.querySelector('textarea').focus();
    });

    replyForm.querySelector('.reply-cancel').addEventListener('click', () => {
      replyForm.classList.remove('open');
      replyForm.querySelector('textarea').value = '';
      replyForm.querySelector('.reply-name-input').value = '';
    });

    replyForm.querySelector('.reply-submit').addEventListener('click', async function() {
      const text = replyForm.querySelector('textarea').value.trim();
      if (!text) return;
      const name = replyForm.querySelector('.reply-name-input').value.trim();
      this.textContent = 'Posting\u2026';
      this.disabled = true;
      try {
        await addDoc(colRef, { name, text, parentId: docId, ts: serverTimestamp() });
        replyForm.querySelector('textarea').value = '';
        replyForm.querySelector('.reply-name-input').value = '';
        replyForm.classList.remove('open');
        await load();
      } catch(e) { console.error('Failed to post reply:', e); }
      this.textContent = 'Post reply';
      this.disabled = false;
    });

    return item;
  }

  // ‚îÄ‚îÄ Render ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  function render(docs) {
    const list = document.getElementById('cm-list');
    list.innerHTML = '';
    if (!docs || !docs.length) {
      list.innerHTML = '<p class="comment-empty">No comments yet. Be the first.</p>';
      return;
    }
    buildTree(docs).forEach(node => list.appendChild(buildEl(node, 0)));
  }

  async function load() {
    try {
      const q = query(colRef, orderBy('ts', 'asc'));
      const snap = await getDocs(q);
      render(snap.docs);
    } catch(e) { console.error('Failed to load comments:', e); render([]); }
  }

  // ‚îÄ‚îÄ Post top-level comment ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  document.getElementById('cm-submit').addEventListener('click', async function() {
    const text = document.getElementById('cm-text').value.trim();
    if (!text) return;
    const name = nameInput.value.trim();
    const btn = document.getElementById('cm-submit');
    btn.textContent = 'Posting\u2026';
    btn.disabled = true;
    try {
      await addDoc(colRef, { name, text, parentId: null, ts: serverTimestamp() });
      document.getElementById('cm-text').value = '';
      nameInput.value = '';
      await load();
    } catch(e) { console.error('Failed to post comment:', e); }
    btn.textContent = 'Post';
    btn.disabled = false;
  });

  load();
  initPostSalute();
</script>


<footer>
  <div class="footer-logo">Peck's Mission</div>
  <p class="footer-kipling">"And so hold on when there is nothing in you except the Will which says to them: Hold on."</p>
  <p class="footer-line">‚Äî Rudyard Kipling, If</p>
  <p class="footer-line" style="margin-top:0.8rem;color:#555;">"The ceiling you hit your whole life wasn't your ceiling. It was the condition's ceiling."</p>
  <ul class="nav-footer">
    <li><a href="index.html">Home</a></li>
    <li><a href="about.html">About</a></li>
    <li><a href="chiari.html">Chiari</a></li>
    <li><a href="blog.html">From The Field</a></li>
    <li><a href="follow-along.html">Follow Along</a></li>
  </ul>
</footer>

<!-- FOLLOW ALONG POPUP -->
<div class="popup-overlay" id="popup-overlay" role="dialog" aria-modal="true" aria-label="Follow Along">
  <div class="popup-box">
    <button class="popup-close" id="popup-close" aria-label="Close">&times;</button>
    <p class="popup-eyebrow">Surgery is February 26th</p>
    <h2 class="popup-title">Follow Along</h2>
    <p class="popup-sub">I'll be on the other side of it soon ‚Äî and I'll have a lot to say. Get updates straight to your inbox.</p>

    <div id="popup-form">
      <div class="popup-form-group">
        <input class="popup-input" type="text" id="popup-name" placeholder="Your name" />
      </div>
      <div class="popup-form-group">
        <input class="popup-input" type="email" id="popup-email" placeholder="Your email" />
      </div>
      <button class="popup-btn" id="popup-submit-btn" onclick="submitPopup()">I'm In</button>
      <button class="popup-skip" id="popup-skip">Maybe later</button>
    </div>

    <div class="popup-success" id="popup-success">
      <p class="popup-success-msg">You're in. Thank you.</p>
      <p class="popup-success-sub">I'll see you on the other side.</p>
    </div>
  </div>
</div>

<script>
  const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbyaDNsViYx1XxdNgWhF_JViMJQ42qcGNS38ReZ6Lb0q8T16szKpikQD49hXs_B3Y7zo/exec';

  function showPopup() {
    const overlay = document.getElementById('popup-overlay');
    overlay.classList.add('visible');
    document.body.style.overflow = 'hidden';
  }

  function closePopup() {
    const overlay = document.getElementById('popup-overlay');
    overlay.classList.remove('visible');
    document.body.style.overflow = '';
    // Don't show again this session
    localStorage.setItem('popup-dismissed', '1');
  }

  // Show after 60 seconds, unless already dismissed
  if (!localStorage.getItem('popup-dismissed')) {
    setTimeout(showPopup, 60000);
  }

  document.getElementById('popup-close').addEventListener('click', closePopup);
  document.getElementById('popup-skip').addEventListener('click', closePopup);
  document.getElementById('popup-overlay').addEventListener('click', function(e) {
    if (e.target === this) closePopup();
  });

  function submitPopup() {
    const btn = document.getElementById('popup-submit-btn');
    const name = document.getElementById('popup-name').value.trim();
    const email = document.getElementById('popup-email').value.trim();

    if (!name || !email) {
      alert('Please enter your name and email.');
      return;
    }

    btn.textContent = 'Sending...';
    btn.disabled = true;

    fetch(SCRIPT_URL, {
      method: 'POST',
      mode: 'no-cors',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ name, email, message: 'Signed up via popup on blog-post-three' })
    })
    .then(() => {
      document.getElementById('popup-form').style.display = 'none';
      document.getElementById('popup-success').style.display = 'block';
      localStorage.setItem('popup-dismissed', '1');
      setTimeout(closePopup, 3000);
    })
    .catch(() => {
      btn.textContent = 'I\'m In';
      btn.disabled = false;
      alert('Something went wrong. Please try again.');
    });
  }
</script>


<script>
  var hamburger = document.getElementById('hamburger');
  var mobileMenu = document.getElementById('mobileMenu');
  hamburger.addEventListener('click', function() {
    hamburger.classList.toggle('open');
    mobileMenu.classList.toggle('open');
    
  });
  function closeMobile() {
    hamburger.classList.remove('open');
    mobileMenu.classList.remove('open');
    
  }
</script>
<style>
#tldr-btn{position:fixed;bottom:2rem;right:2rem;z-index:9000;background:#c9a84c;color:#0a0a0a;border:none;cursor:pointer;font-family:'DM Mono',monospace;font-size:0.75rem;letter-spacing:0.18em;text-transform:uppercase;padding:0.65rem 1.2rem;border-radius:2px;box-shadow:0 4px 24px rgba(0,0,0,0.5);transition:background 0.2s,transform 0.15s;line-height:1;}
#tldr-btn:hover{background:#e8c97a;transform:translateY(-2px);}
#tldr-overlay{display:none;position:fixed;inset:0;z-index:9500;background:rgba(0,0,0,0.65);backdrop-filter:blur(4px);align-items:flex-end;justify-content:flex-end;padding:2rem;}
#tldr-overlay.open{display:flex;}
#tldr-box{background:#111;border:1px solid rgba(201,168,76,0.25);border-radius:4px;max-width:440px;width:100%;box-shadow:0 16px 64px rgba(0,0,0,0.7);overflow:hidden;animation:tldrIn 0.22s cubic-bezier(0.34,1.56,0.64,1);}
@keyframes tldrIn{from{opacity:0;transform:translateY(20px) scale(0.97);}to{opacity:1;transform:translateY(0) scale(1);}}
#tldr-head{display:flex;align-items:center;justify-content:space-between;padding:1rem 1.25rem 0.8rem;border-bottom:1px solid rgba(255,255,255,0.06);}
#tldr-head-left{display:flex;flex-direction:column;gap:0.15rem;}
#tldr-eyebrow{font-family:'DM Mono',monospace;font-size:0.7rem;letter-spacing:0.22em;text-transform:uppercase;color:#c9a84c;}
#tldr-ptitle{font-family:'Bebas Neue',sans-serif;font-size:1.3rem;letter-spacing:0.05em;color:#f5f0e8;line-height:1;}
#tldr-x{background:none;border:none;cursor:pointer;color:#9a9a9a;font-size:1.1rem;line-height:1;padding:4px;transition:color 0.2s;}
#tldr-x:hover{color:#c9a84c;}
#tldr-list{list-style:none;margin:0;padding:0.8rem 1.25rem 1.2rem;display:flex;flex-direction:column;gap:0.65rem;}
#tldr-list li{display:flex;gap:0.6rem;font-family:'Crimson Pro',Georgia,serif;font-size:1rem;line-height:1.55;color:#c8c2b5;}
#tldr-list li:before{content:"‚Üí";color:#c9a84c;flex-shrink:0;margin-top:0.05em;}
@media(max-width:480px){#tldr-btn{bottom:1.2rem;right:1.2rem;}#tldr-overlay{padding:0;align-items:flex-end;}#tldr-box{max-width:100%;border-radius:4px 4px 0 0;}}
</style>
<div id="tldr-data" data-title="I Needed You" style="display:none"></div>
<script>
(function(){
  var points = ["I went fully public. Most vulnerable I've ever been online. I didn't know if anyone would show up.", "They showed up. Church friends, military brothers, people my parents have known since they were kids. All of them.", "I don't want to be the patient. I'm the medic. I treat people. Being on the receiving end is not a role I want ‚Äî but here I am.", "I was misdiagnosed with ADHD and vertigo for years. Should an MRI be standard? How many people out there are me right now?", "I don't want meals. I don't want anything during surgery. I want you to share this with the one person whose hands are tingling and who can't get anyone to listen."];
  var title = "I Needed You";

  var btn = document.createElement('button');
  btn.id = 'tldr-btn';
  btn.textContent = 'TL;DR';
  document.body.appendChild(btn);

  var overlay = document.createElement('div');
  overlay.id = 'tldr-overlay';

  var box = document.createElement('div');
  box.id = 'tldr-box';

  var head = document.createElement('div');
  head.id = 'tldr-head';

  var headLeft = document.createElement('div');
  headLeft.id = 'tldr-head-left';

  var eyebrow = document.createElement('span');
  eyebrow.id = 'tldr-eyebrow';
  eyebrow.textContent = 'Too Long; Didn‚Äôt Read';

  var ptitle = document.createElement('span');
  ptitle.id = 'tldr-ptitle';
  ptitle.textContent = title;

  headLeft.appendChild(eyebrow);
  headLeft.appendChild(ptitle);

  var xBtn = document.createElement('button');
  xBtn.id = 'tldr-x';
  xBtn.setAttribute('aria-label','Close');
  xBtn.textContent = '‚úï';

  head.appendChild(headLeft);
  head.appendChild(xBtn);

  var list = document.createElement('ul');
  list.id = 'tldr-list';
  points.forEach(function(p){
    var li = document.createElement('li');
    li.textContent = p;
    list.appendChild(li);
  });

  box.appendChild(head);
  box.appendChild(list);
  overlay.appendChild(box);
  document.body.appendChild(overlay);

  btn.addEventListener('click', function(){ overlay.classList.add('open'); });
  xBtn.addEventListener('click', function(){ overlay.classList.remove('open'); });
  overlay.addEventListener('click', function(e){ if(e.target===overlay) overlay.classList.remove('open'); });
  document.addEventListener('keydown', function(e){ if(e.key==='Escape') overlay.classList.remove('open'); });
})();
</script>
</body>
</html>
